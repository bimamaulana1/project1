<!DOCTYPE html>
<html>
  <head>
    <title>Data dari MySQL CleverCloud</title>
    <style>
      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <h2>Daftar Data</h2>
    <table id="tabelData">
      <thead>
        <tr id="header"></tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      fetch("/data")
        .then((res) => res.json())
        .then((data) => {
          if (data.length > 0) {
            const header = document.getElementById("header");
            Object.keys(data[0]).forEach((key) => {
              const th = document.createElement("th");
              th.textContent = key;
              header.appendChild(th);
            });

            const tbody = document.querySelector("tbody");
            data.forEach((row) => {
              const tr = document.createElement("tr");
              Object.values(row).forEach((val) => {
                const td = document.createElement("td");
                td.textContent = val;
                tr.appendChild(td);
              });
              tbody.appendChild(tr);
            });
          } else {
            document.body.innerHTML += "<p>Tidak ada data.</p>";
          }
        })
        .catch((err) => {
          document.body.innerHTML += "<p>Gagal mengambil data.</p>";
          console.error(err);
        });
    </script>
  </body>
</html>
